-- CONFIG
local attackRate = 0.01 -- Speed of the loop (seconds)
local zapRange = 20 -- Distance to search for targets

-- SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- STATE
local running = true

-- HELPERS
local function getChar(plr)
	return plr and plr.Character
end

local function getTouchPart(tool)
	local touchTransmitter = tool and tool:FindFirstChildWhichIsA("TouchTransmitter", true)
	return touchTransmitter and touchTransmitter.Parent
end

local function autoEquip(tool)
	if not tool:IsDescendantOf(workspace) then
		tool.Parent = getChar(LocalPlayer)
	end
	tool:Activate()
end

local function cloneToolAndStrike(tool, char)
	local fightEvent = tool:FindFirstChild("FightEvent")
	if not fightEvent then return end

	local cloned = tool:Clone()
	cloned.Name = tool.Name .. "_Clone" .. math.random(1000,9999)
	cloned.Parent = char
	cloned:Activate()
	local clonedEvent = cloned:FindFirstChild("FightEvent")
	if clonedEvent then
		clonedEvent:FireServer()
	end
end

-- MAIN LOOP
task.spawn(function()
	while running do
		local char = getChar(LocalPlayer)
		if not char then task.wait(1) continue end

		local playersFolder = workspace:FindFirstChild("Players")
		local parentToCheck = playersFolder or workspace

		for _, tool in ipairs(char:GetChildren()) do
			if tool:IsA("Tool") then
				local fightEvent = tool:FindFirstChild("FightEvent")
				local touchPart = getTouchPart(tool)

				-- Main attack
				if fightEvent then
					autoEquip(tool)
					fightEvent:FireServer()

					-- Try cloning it for extra hit
					cloneToolAndStrike(tool, char)
				end

				-- Aura effect remains untouched
				if touchPart then
					for _, target in ipairs(workspace:GetDescendants()) do
						if
							target:IsA("BasePart")
							and target:IsDescendantOf(parentToCheck)
							and target ~= touchPart
							and (target.Position - touchPart.Position).Magnitude <= zapRange
						then
							-- Optionally teleport hitbox onto target to force collision
							touchPart.CFrame = target.CFrame * CFrame.new(0, 0.1, 0)

							-- firetouchinterest spam
							firetouchinterest(touchPart, target, 1)
							firetouchinterest(touchPart, target, 0)
						end
					end
				end
			end
		end

		task.wait(attackRate)
	end
end)

-- RESET ON DEATH
LocalPlayer.CharacterAdded:Connect(function()
	task.wait(1)
	running = true
end)

print("ðŸ’¥ Enhanced Aura Spammer Activated â€“ With Clone + Zap Boost")
