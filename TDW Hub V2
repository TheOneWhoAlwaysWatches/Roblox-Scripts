--// TDW Hub Base UI (Reddish-Black Hacker Theme)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

--// Helper: Make GUI Draggable
local function makeDraggable(gui)
	local dragToggle, dragInput, dragStart, startPos
	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragToggle = true
			dragStart = input.Position
			startPos = gui.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragToggle = false
				end
			end)
		end
	end)
	gui.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragToggle then
			local delta = input.Position - dragStart
			gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

--// GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "TDW_Hub"
gui.ResetOnSpawn = false
gui.Parent = game:GetService("CoreGui")

--// Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 600, 0, 400)
mainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 10, 10)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = false
mainFrame.Parent = gui
makeDraggable(mainFrame)

--// Binary BG
local binaryBG = Instance.new("TextLabel")
binaryBG.Size = UDim2.new(1, 0, 1, 0)
binaryBG.BackgroundTransparency = 1
binaryBG.TextColor3 = Color3.fromRGB(255, 0, 0)
binaryBG.TextTransparency = 0.7
binaryBG.Font = Enum.Font.Code
binaryBG.TextSize = 12
binaryBG.Text = "010101001010110101001010011101..."
binaryBG.TextWrapped = true
binaryBG.TextXAlignment = Enum.TextXAlignment.Center
binaryBG.TextYAlignment = Enum.TextYAlignment.Center
binaryBG.ZIndex = 0
binaryBG.Parent = mainFrame

--// Top Navigation Bar
local navBar = Instance.new("Frame")
navBar.Size = UDim2.new(1, 0, 0, 40)
navBar.BackgroundColor3 = Color3.fromRGB(30, 0, 0)
navBar.BorderSizePixel = 0
navBar.ZIndex = 2
navBar.Parent = mainFrame

local pageButtons = {}
local pages = {}

local pageNames = {
	{"üíÄ", "Main"},
	{"üîß", "Misc"},
	{"üåê", "Other Hubs"},
}

local activePage = nil

for i, data in ipairs(pageNames) do
	local icon, name = unpack(data)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 140, 1, 0)
	btn.Position = UDim2.new(0, (i - 1) * 145, 0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
	btn.Text = icon .. "  " .. name
	btn.Font = Enum.Font.Code
	btn.TextColor3 = Color3.fromRGB(255, 50, 50)
	btn.TextSize = 16
	btn.Parent = navBar
	pageButtons[name] = btn

	local page = Instance.new("Frame")
	page.Size = UDim2.new(1, -40, 1, -40)
	page.Position = UDim2.new(0, 40, 0, 40)
	page.BackgroundTransparency = 1
	page.Visible = false
	page.Parent = mainFrame
	pages[name] = page

	btn.MouseButton1Click:Connect(function()
		if activePage then pages[activePage].Visible = false end
		activePage = name
		pages[name].Visible = true
	end)

	local sep = Instance.new("Frame")
	sep.Size = UDim2.new(0, 1, 1, -10)
	sep.Position = UDim2.new(0, (i * 145) - 5, 0, 5)
	sep.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	sep.BorderSizePixel = 0
	sep.Parent = navBar
end

--// Vertical TDW Label
local tdwFrame = Instance.new("Frame")
tdwFrame.Size = UDim2.new(0, 40, 1, -40)
tdwFrame.Position = UDim2.new(0, 0, 0, 40)
tdwFrame.BackgroundColor3 = Color3.fromRGB(20, 0, 0)
tdwFrame.Parent = mainFrame

for i, char in ipairs({"T", "D", "W"}) do
	local lbl = Instance.new("TextLabel")
	lbl.Size = UDim2.new(1, 0, 0, 40)
	lbl.Position = UDim2.new(0, 0, 0, (i - 1) * 40)
	lbl.Text = char
	lbl.Font = Enum.Font.Code
	lbl.TextColor3 = Color3.fromRGB(255, 0, 0)
	lbl.BackgroundTransparency = 1
	lbl.TextSize = 28
	lbl.Parent = tdwFrame
end

--// Floating Toggle Button
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 120, 0, 40)
toggleBtn.Position = UDim2.new(0, 20, 0.5, -20)
toggleBtn.Text = "Toggle TDW Hub"
toggleBtn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
toggleBtn.Font = Enum.Font.Code
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.TextSize = 14
toggleBtn.Parent = gui
makeDraggable(toggleBtn)

local open = true
toggleBtn.MouseButton1Click:Connect(function()
	open = not open
	mainFrame.Visible = open
end)

--// Loopbring Panel (Left Side)
local loopBtn = Instance.new("TextButton")
loopBtn.Size = UDim2.new(0, 30, 0, 30)
loopBtn.Position = UDim2.new(0, 5, 0, 5)
loopBtn.Text = "L"
loopBtn.TextColor3 = Color3.new(1, 0, 0)
loopBtn.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
loopBtn.Font = Enum.Font.Code
loopBtn.TextSize = 18
loopBtn.Parent = mainFrame

local loopPanel = Instance.new("Frame")
loopPanel.Size = UDim2.new(0, 140, 1, -40)
loopPanel.Position = UDim2.new(0, -140, 0, 40)
loopPanel.BackgroundColor3 = Color3.fromRGB(30, 0, 0)
loopPanel.Visible = false
loopPanel.Parent = mainFrame

local loopList = Instance.new("TextLabel")
loopList.Size = UDim2.new(1, 0, 1, 0)
loopList.BackgroundTransparency = 1
loopList.TextColor3 = Color3.fromRGB(255, 0, 0)
loopList.Font = Enum.Font.Code
loopList.TextSize = 14
loopList.TextXAlignment = Enum.TextXAlignment.Left
loopList.TextYAlignment = Enum.TextYAlignment.Top
loopList.TextWrapped = true
loopList.Text = ""
loopList.Parent = loopPanel

local function updateLoopPanel()
	local names = {}
	for _, plr in ipairs(Players:GetPlayers()) do
		table.insert(names, "- " .. plr.Name)
	end
	loopList.Text = table.concat(names, "\n")
end

Players.PlayerAdded:Connect(updateLoopPanel)
Players.PlayerRemoving:Connect(updateLoopPanel)
updateLoopPanel()

loopBtn.MouseButton1Click:Connect(function()
	loopPanel.Visible = not loopPanel.Visible
end)

--// User Info Panel (Right Side)
local infoBtn = Instance.new("TextButton")
infoBtn.Size = UDim2.new(0, 30, 0, 30)
infoBtn.Position = UDim2.new(1, -35, 0, 5)
infoBtn.Text = "I"
infoBtn.TextColor3 = Color3.new(0, 1, 0)
infoBtn.BackgroundColor3 = Color3.fromRGB(0, 30, 0)
infoBtn.Font = Enum.Font.Code
infoBtn.TextSize = 18
infoBtn.Parent = mainFrame

local infoPanel = Instance.new("Frame")
infoPanel.Size = UDim2.new(0, 140, 1, -40)
infoPanel.Position = UDim2.new(1, 0, 0, 40)
infoPanel.BackgroundColor3 = Color3.fromRGB(0, 20, 0)
infoPanel.Visible = false
infoPanel.Parent = mainFrame

local userLbl = Instance.new("TextLabel")
userLbl.Size = UDim2.new(1, 0, 0, 40)
userLbl.Position = UDim2.new(0, 0, 0, 0)
userLbl.Text = "User: " .. player.Name
userLbl.Font = Enum.Font.Code
userLbl.TextColor3 = Color3.fromRGB(0, 255, 0)
userLbl.TextSize = 14
userLbl.BackgroundTransparency = 1
userLbl.Parent = infoPanel

local fpsLbl = Instance.new("TextLabel")
fpsLbl.Size = UDim2.new(1, 0, 0, 30)
fpsLbl.Position = UDim2.new(0, 0, 0, 40)
fpsLbl.Font = Enum.Font.Code
fpsLbl.TextColor3 = Color3.fromRGB(0, 255, 0)
fpsLbl.TextSize = 14
fpsLbl.BackgroundTransparency = 1
fpsLbl.Text = "FPS: ..."
fpsLbl.Parent = infoPanel

local pingLbl = Instance.new("TextLabel")
pingLbl.Size = UDim2.new(1, 0, 0, 30)
pingLbl.Position = UDim2.new(0, 0, 0, 70)
pingLbl.Font = Enum.Font.Code
pingLbl.TextColor3 = Color3.fromRGB(0, 255, 0)
pingLbl.TextSize = 14
pingLbl.BackgroundTransparency = 1
pingLbl.Text = "Ping: ..."
pingLbl.Parent = infoPanel

infoBtn.MouseButton1Click:Connect(function()
	infoPanel.Visible = not infoPanel.Visible
end)

RunService.RenderStepped:Connect(function()
	local ping = math.random(40, 90) -- Replace with real ping if desired
	fpsLbl.Text = "FPS: " .. math.floor(1 / RunService.RenderStepped:Wait())
	pingLbl.Text = "Ping: " .. ping .. "ms"
end)

--// SCRIPT BUTTON SYSTEM (Example)
local Scripts = {
	["Main"] = {
		["Speed Boost"] = function() print("Speed!") end,
		["Jump Boost"] = function() print("Jump!") end
	},
	["Misc"] = {
		["Gravity Off"] = function() print("Gravity disabled.") end
	},
	["Other Hubs"] = {
		["Open Another Hub"] = function() print("Opening...") end
	}
}

for pageName, scriptList in pairs(Scripts) do
	local container = pages[pageName]
	local y = 10
	for name, func in pairs(scriptList) do
		local btn = Instance.new("TextButton")
		btn.Size = UDim2.new(0, 200, 0, 30)
		btn.Position = UDim2.new(0, 10, 0, y)
		btn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
		btn.TextColor3 = Color3.fromRGB(255, 0, 0)
		btn.Font = Enum.Font.Code
		btn.TextSize = 14
		btn.Text = name
		btn.Parent = container
		btn.MouseButton1Click:Connect(func)
		y = y + 35
	end
end

-- Set default visible page
pages["Main"].Visible = true
activePage = "Main"

print("[TDW Hub] UI loaded successfully.")
