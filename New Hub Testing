-- ScriptHubUI.lua
-- Roblox Executor Script Hub UI (TDW) with expandable panels and dividers

--[[
FEATURES ADDED:
- Divider lines between page buttons
- TDW title vertically stacked on left with divider
- Divider below page buttons
- Expandable right panel with user info
- Expandable left panel with server players and loopbring toggle
]]

local Players = game:GetService("Players")
local StatsService = game:GetService("Stats")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- FPS and Ping tracking
local fps = 0
local lastTime = tick()
RunService.RenderStepped:Connect(function()
	local now = tick()
	fps = 1 / (now - lastTime)
	lastTime = now
end)

local function getFPS()
	return math.floor(fps + 0.5)
end

local function getPing()
	local pingValue = StatsService.Network.ServerStatsItem["Data Ping"]:GetValue()
	return math.floor(pingValue + 0.5)
end

-- Main GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ScriptHubUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 800, 0, 400)
MainFrame.Position = UDim2.new(0.5, -400, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)
MainFrame.BorderSizePixel = 2
MainFrame.Parent = ScreenGui

-- Loopbring Button (Top Left)
local LoopbringBtn = Instance.new("TextButton")
LoopbringBtn.Size = UDim2.new(0, 100, 0, 25)
LoopbringBtn.Position = UDim2.new(0, 0, 0, 0)
LoopbringBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
LoopbringBtn.BorderColor3 = Color3.fromRGB(100, 0, 0)
LoopbringBtn.Text = "[Loopbring]"
LoopbringBtn.Font = Enum.Font.SourceSansBold
LoopbringBtn.TextSize = 16
LoopbringBtn.TextColor3 = Color3.fromRGB(255, 0, 0)
LoopbringBtn.Parent = MainFrame

-- Divider between Loopbring and nav tabs
local loopNavDivider = Instance.new("Frame")
loopNavDivider.Size = UDim2.new(0, 2, 0, 25)
loopNavDivider.Position = UDim2.new(0, 100, 0, 0)
loopNavDivider.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
loopNavDivider.Parent = MainFrame

-- Top Navigation Tabs
local tabNames = {"Tips", "Main", "Misc", "Hubs"}
local tabIcons = {"ðŸ§ ", "ðŸ’€", "ðŸ”§", "ðŸŒ"}
for i, name in ipairs(tabNames) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 80, 0, 25)
	btn.Position = UDim2.new(0, 100 + ((i - 1) * 80), 0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	btn.BorderSizePixel = 0
	btn.Text = tabIcons[i] .. " " .. name
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 18
	btn.TextColor3 = Color3.fromRGB(0, 255, 0)
	btn.Parent = MainFrame

	if i > 1 then
		local divider = Instance.new("Frame")
		divider.Size = UDim2.new(0, 1, 0, 25)
		divider.Position = UDim2.new(0, 100 + ((i - 1) * 80), 0, 0)
		divider.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
		divider.Parent = MainFrame
	end
end

-- Divider below top tabs
local topDivider = Instance.new("Frame")
topDivider.Size = UDim2.new(1, 0, 0, 2)\ntopDivider.Position = UDim2.new(0, 0, 0, 25)\ntopDivider.BackgroundColor3 = Color3.fromRGB(255, 0, 0)\ntopDivider.Parent = MainFrame

-- Left Title and Divider
local leftPanel = Instance.new("Frame")
leftPanel.Size = UDim2.new(0, 25, 1, 0)
leftPanel.Position = UDim2.new(0, -25, 0, 0)
leftPanel.BackgroundTransparency = 1
leftPanel.Parent = MainFrame

local tdwLetters = {"T", "D", "W"}
for i, letter in ipairs(tdwLetters) do
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, 0, 0, 30)
	label.Position = UDim2.new(0, 0, 0, 30 + ((i - 1) * 150))
	label.Text = letter
	label.Font = Enum.Font.SourceSansBold
	label.TextSize = 20
	label.TextColor3 = Color3.fromRGB(255, 0, 0)
	label.BackgroundTransparency = 1
	label.Parent = leftPanel
end

local leftDivider = Instance.new("Frame")
leftDivider.Size = UDim2.new(0, 2, 1, 0)
leftDivider.Position = UDim2.new(0, 0, 0, 0)
leftDivider.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
leftDivider.Parent = MainFrame

-- Placeholder Left Panel Expand
local LeftExpand = Instance.new("Frame")
LeftExpand.Name = "LeftExpandPanel"
LeftExpand.Size = UDim2.new(0, 200, 1, 0)
LeftExpand.Position = UDim2.new(0, -200, 0, 0)
LeftExpand.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
LeftExpand.Visible = false
LeftExpand.Parent = MainFrame

LoopbringBtn.MouseButton1Click:Connect(function()
	LeftExpand.Visible = not LeftExpand.Visible
end)

-- Right Panel Expand Toggle
local ToggleRight = Instance.new("TextButton")
ToggleRight.Size = UDim2.new(0, 25, 0, 25)
ToggleRight.Position = UDim2.new(1, -30, 0, 5)
ToggleRight.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
ToggleRight.Text = ">"
ToggleRight.Font = Enum.Font.SourceSansBold
ToggleRight.TextSize = 18
ToggleRight.TextColor3 = Color3.fromRGB(0, 255, 0)
ToggleRight.Parent = MainFrame

local RightExpand = Instance.new("Frame")
RightExpand.Name = "RightExpandPanel"
RightExpand.Size = UDim2.new(0, 200, 1, 0)
RightExpand.Position = UDim2.new(1, 0, 0, 0)
RightExpand.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
RightExpand.Visible = false
RightExpand.Parent = MainFrame

ToggleRight.MouseButton1Click:Connect(function()
	RightExpand.Visible = not RightExpand.Visible
end)

-- Add user info elements to RightExpand
local UsernameLabel = Instance.new("TextLabel")
UsernameLabel.Size = UDim2.new(1, 0, 0, 30)
UsernameLabel.Position = UDim2.new(0, 0, 0, 10)
UsernameLabel.Text = "User: " .. LocalPlayer.Name
UsernameLabel.Font = Enum.Font.SourceSans
UsernameLabel.TextSize = 18
UsernameLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
UsernameLabel.BackgroundTransparency = 1
UsernameLabel.Parent = RightExpand

local Avatar = Instance.new("ImageLabel")
Avatar.Size = UDim2.new(0, 60, 0, 60)
Avatar.Position = UDim2.new(0.5, -30, 0, 40)
Avatar.BackgroundTransparency = 1
Avatar.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. LocalPlayer.UserId .. "&width=150&height=150&format=png"
Avatar.Parent = RightExpand

local FPSLabel = Instance.new("TextLabel")
FPSLabel.Size = UDim2.new(1, 0, 0, 20)
FPSLabel.Position = UDim2.new(0, 0, 0, 110)
FPSLabel.Text = "FPS: 0"
FPSLabel.Font = Enum.Font.SourceSans
FPSLabel.TextSize = 16
FPSLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
FPSLabel.BackgroundTransparency = 1
FPSLabel.Parent = RightExpand

local PingLabel = Instance.new("TextLabel")
PingLabel.Size = UDim2.new(1, 0, 0, 20)
PingLabel.Position = UDim2.new(0, 0, 0, 130)
PingLabel.Text = "Ping: 0ms"
PingLabel.Font = Enum.Font.SourceSans
PingLabel.TextSize = 16
PingLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
PingLabel.BackgroundTransparency = 1
PingLabel.Parent = RightExpand

-- Update stats live
RunService.RenderStepped:Connect(function()
	if RightExpand.Visible then
		FPSLabel.Text = "FPS: " .. getFPS()
		PingLabel.Text = "Ping: " .. getPing() .. "ms"
	end
end)

-- Placeholder loopbring functionality and data fetching scripts will be added next...
